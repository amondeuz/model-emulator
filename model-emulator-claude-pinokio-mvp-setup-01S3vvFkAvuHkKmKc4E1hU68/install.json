{
  "run": [
    {
      "method": "log",
      "params": {
        "raw": "Installing dependencies..."
      }
    },
    {
      "method": "shell.run",
      "params": {
        "message": "npm install",
        "on": {
          "success": "{{local.installSuccess = true}}",
          "error": "{{local.installSuccess = false}}"
        }
      }
    },
    {
      "when": "{{local.installSuccess}}",
      "method": "shell.run",
      "params": {
        "message": "{{platform === 'win32' ? 'dir node_modules' : 'ls node_modules'}}",
        "on": {
          "success": "{{local.dependenciesExist = true}}"
        }
      }
    },
    {
      "when": "{{local.dependenciesExist}}",
      "method": "log",
      "params": {
        "raw": "✅ Installation complete! Use 'Start Server' to run the emulator."
      }
    },
    {
      "when": "{{!local.installSuccess || !local.dependenciesExist}}",
      "method": "log",
      "params": {
        "raw": "⚠️  Installation may have failed. Check the console for errors."
      }
    }
  ]
}
